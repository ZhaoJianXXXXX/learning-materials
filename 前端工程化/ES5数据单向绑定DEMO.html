<html>
	<head>
		<meta charset = "utf8"/>
		<title>data-binding</title>
	</head>
	<body>
		<div id = "mvvm">
			{{ name }}
		</div>
		<script type = 'text/javascript'>
			// 数据对象
			var data = {
				name : '',
			};
			// 操作函数
			function mvm (params) {
				// 缓存DOM字符
				var dom = document.getElementById('mvvm').innerHTML;
				// 循环设置data对象属性的set方法
				for(var pro in params){
					// 过滤原型链上的属性
					if(params.hasOwnProperty(pro)){
						// 定义监听赋值事件
						Object.defineProperty(params,pro,{
							set:function (v) {
								// 赋值
								this.value = v;
								// 匹配双大括号正则
								var regexp = new RegExp("\\{\\{\\s*" + pro + "\\s*\\}\\}","gi");
								// 替换
								htmlstr = dom.replace(regexp,this.value);
								// 渲染
								document.getElementById('mvvm').innerHTML = htmlstr;
							}
						});
					}
				}
			}
			// 启动
			mvm(data);
			// 赋值
			data.name = 'hehe';
			// 使用：请在控制台输入 data.name = '123'或者再增加js脚本执行data的改变;
		</script>
	</body>
</html>
